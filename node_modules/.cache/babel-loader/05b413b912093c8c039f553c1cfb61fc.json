{"remainingRequest":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/thread-loader/dist/cjs.js!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/babel-loader/lib/index.js!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/global/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/global/login.vue","mtime":1660086052986},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/babel.config.js","mtime":1660081311958},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/thread-loader/dist/cjs.js","mtime":1642231923880},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/babel-loader/lib/index.js","mtime":1660080774033},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js","mtime":1660080780218}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Y29uc3QgewogIHJlcXVpcmVkLAogIG1pbkxlbmd0aAp9ID0gcmVxdWlyZSgidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIik7CgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwpheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gImh0dHA6Ly8iICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgIjo4MDAwIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjcmVhcnVzdWFyaW8iLAogIGRhdGE6ICgpID0+ICh7CiAgICBuYW1lOiAiIiwKICAgIGVtYWlsOiAiIiwKICAgIC8vYUBhLmNvbS8vYkBiLmNvbQogICAgcGFzc3dvcmQ6ICIiLAogICAgLy8xMjM0NTY3OAogICAgc2hvdzM6IGZhbHNlCiAgfSksCiAgdmFsaWRhdGlvbnM6IHsKICAgIG5hbWU6IHsKICAgICAgcmVxdWlyZWQKICAgIH0sCiAgICBwYXNzd29yZDogewogICAgICByZXF1aXJlZCwKICAgICAgbWluTGVuZ3RoOiBtaW5MZW5ndGgoOCkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXNzd29yZEVycm9ycygpIHsKICAgICAgY29uc3QgZXJyb3JzID0gW107CiAgICAgIGlmICghdGhpcy4kdi5wYXNzd29yZC4kZGlydHkpIHJldHVybiBlcnJvcnM7CiAgICAgICF0aGlzLiR2LnBhc3N3b3JkLm1pbkxlbmd0aCAmJiBlcnJvcnMucHVzaCgiTGEgY29udHJhc2XDsWEgZGViZSBzZXIgOCBjYXJhY3RlcmVzIGRlIGxhcmdvLCBtaW5pbW8uIik7CiAgICAgICF0aGlzLiR2LnBhc3N3b3JkLnJlcXVpcmVkICYmIGVycm9ycy5wdXNoKCJDb250YXNlw7FhIHJlcXVlcmlkYS4iKTsKICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0sCgogICAgcHJvZ3Jlc3MoKSB7CiAgICAgIHJldHVybiBNYXRoLm1pbigxMDAsIHRoaXMucGFzc3dvcmQubGVuZ3RoICogMTMpOwogICAgfSwKCiAgICBjb2xvcigpIHsKICAgICAgcmV0dXJuIFsiZXJyb3IiLCAid2FybmluZyIsICJzdWNjZXNzIl1bTWF0aC5mbG9vcih0aGlzLnByb2dyZXNzIC8gNDApXTsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBsb2dpbigpIHsKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKICAgICAgdGhpcy5uYW1lID0gdGhpcy5uYW1lLnRyaW0oKTsKICAgICAgbGV0IGVudmlhciA9IHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfTsKICAgICAgYXhpb3MuZ2V0KCJzYW5jdHVtL2NzcmYtY29va2llIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmVzcG9uc2U7CiAgICAgICAgYXhpb3MucG9zdCgiYXBpL2xvZ2luIiwgZW52aWFyKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGxldCByb2wgPSByZXNwb25zZS5kYXRhLnVzZXIucm9sX2lkOwogICAgICAgICAgbGV0IHVzZXJJZCA9IHJlc3BvbnNlLmRhdGEudXNlci5pZDsKICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJJZCk7CiAgICAgICAgICBzdG9yZS5jb21taXQoInNldHJvbCIsIHJvbCk7CiAgICAgICAgICBzdG9yZS5jb21taXQoInNldFVzZXJJZCIsIHVzZXJJZCk7CiAgICAgICAgICBsZXQgdmFsaWRhZG8gPSByZXNwb25zZS5yZXF1ZXN0LndpdGhDcmVkZW50aWFsczsKCiAgICAgICAgICBpZiAodmFsaWRhZG8gPT0gdHJ1ZSkgewogICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9UT0tFTiIsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICBsZXQgdG9rZW4gPSBzdG9yZS5zdGF0ZS50b2tlbjsKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goImxvZ2luIiwgewogICAgICAgICAgICAgIHRva2VuCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgc3dpdGNoIChyb2wpIHsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgiL3VzdWFyaW9zIikuY2F0Y2goKCkgPT4ge30pOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvYXJ0aWN1bG9zIikuY2F0Y2goKCkgPT4ge30pOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBhbGVydCgiQ3VhbnRhIG5vIGV4aXN0ZSBvIGVzIGluY29ycmVjdGEiKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkYWRvID09IGZhbHNlKSB7CiAgICAgICAgICAgIGFsZXJ0KCJDdWFudGEgbm8gZXhpc3RlIG8gZXMgaW5jb3JyZWN0YSIpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCgogICAgY2xlYXIoKSB7CiAgICAgIHRoaXMubmFtZSA9ICIiOwogICAgICB0aGlzLnBhc3N3b3JkID0gIiI7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAuDA;EAAAA;EAAAC;AAAA;;AACA;AAEA;AACA;AAEAC;AACAA;AACA;EACAC,oBADA;EAEAC;IACAD,QADA;IAEAE,SAFA;IAEA;IACAC,YAHA;IAGA;IACAC;EAJA,EAFA;EASAC;IACAL;MAAAH;IAAA,CADA;IAEAM;MAAAN;MAAAC;IAAA;EAFA,CATA;EAaAQ;IACAC;MACA;MACA;MACA,+BACAC,oEADA;MAEA;MACA;IACA,CARA;;IASAC;MACA;IACA,CAXA;;IAYAC;MACA;IACA;;EAdA,CAbA;EA8BAC;IACA;MACA;MACA;MACA;QACAX,eADA;QAEAG;MAFA;MAKAJ,MACAa,GADA,CACA,qBADA,EAEAC,IAFA,CAEAC;QACAA;QACAf,MACAgB,IADA,CACA,WADA,EACAC,MADA,EAEAH,IAFA,CAEAC;UACA;UACA;UACAG;UACAC;UACAA;UACA;;UACA;YACAA;YACA;YACAA;cAAAC;YAAA;;YACA;cACA;gBACAC;gBACA;;cACA;gBACAA;gBACA;;cACA;gBACAC;gBACA;YATA;UAWA,CAfA,MAeA;YACAA;UACA;QACA,CA3BA,EA4BAC,KA5BA,CA4BAC;UACAN;QACA,CA9BA;MA+BA,CAnCA,EAoCAK,KApCA,CAoCAC;QACAN;MACA,CAtCA;IAuCA,CAhDA;;IAkDAO;MACA;MACA;IACA;;EArDA;AA9BA","names":["required","minLength","axios","name","data","email","password","show3","validations","computed","passwordErrors","errors","progress","color","methods","get","then","response","post","enviar","console","store","token","router","alert","catch","e","clear"],"sourceRoot":"src/components/global","sources":["login.vue"],"sourcesContent":["<template>\n\t<div class=\"logcard\">\n\t\t<v-card\n\t\t\tv-on:keyup.enter=\"login()\"\n\t\t\tclass=\"cont-card\"\n\t\t\televation=\"2\"\n\t\t\t:dark=\"this.$store.getters.hasdarkflag\"\n\t\t>\n\t\t\t<v-card-title class=\"fade-in-title\" style=\"font-size: 3rem\"\n\t\t\t\t><code class=\"font-weight-light\">Pocket</code\n\t\t\t\t><strong\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\tthis.$store.getters.hasdarkflag === true\n\t\t\t\t\t\t\t? 'black-mode-text'\n\t\t\t\t\t\t\t: 'white-mode-text',\n\t\t\t\t\t]\"\n\t\t\t\t\t>stock</strong\n\t\t\t\t></v-card-title\n\t\t\t>\n\t\t\t<v-text-field v-model=\"name\" label=\"Nombre\" required></v-text-field>\n\t\t\t<v-text-field\n\t\t\t\t:append-icon=\"show3 ? 'mdi-eye' : 'mdi-eye-off'\"\n\t\t\t\tv-model=\"password\"\n\t\t\t\t:type=\"show3 ? 'text' : 'password'\"\n\t\t\t\tclass=\"input-group--focused\"\n\t\t\t\t:counter=\"8\"\n\t\t\t\tlabel=\"contrase침a\"\n\t\t\t\t:error-messages=\"passwordErrors\"\n\t\t\t\trequired\n\t\t\t\t@click:append=\"show3 = !show3\"\n\t\t\t\t@input=\"$v.password.$touch()\"\n\t\t\t\t@blur=\"$v.password.$touch()\"\n\t\t\t\tloading\n\t\t\t>\n\t\t\t\t<template v-slot:progress>\n\t\t\t\t\t<v-progress-linear\n\t\t\t\t\t\t:value=\"progress\"\n\t\t\t\t\t\t:color=\"color\"\n\t\t\t\t\t\tabsolute\n\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t></v-progress-linear>\n\t\t\t\t</template>\n\t\t\t</v-text-field>\n\t\t\t<v-card-actions>\n\t\t\t\t<v-btn @click=\"clear\" outlined> limpiar </v-btn>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-btn color=\"#9acd32\" class=\"mr-4\" v-on:click=\"login()\" outlined>\n\t\t\t\t\tIniciar sesi칩n\n\t\t\t\t</v-btn>\n\t\t\t</v-card-actions>\n\t\t</v-card>\n\t</div>\n</template>\n\n<script>\nconst { required, minLength } = require(\"vuelidate/lib/validators\");\nimport axios from \"axios\";\n\nimport store from \"@/store\";\nimport router from \"@/router\";\n\naxios.defaults.withCredentials = true;\naxios.defaults.baseURL = \"http://\" + window.location.hostname + \":8000\";\nexport default {\n\tname: \"crearusuario\",\n\tdata: () => ({\n\t\tname: \"\",\n\t\temail: \"\", //a@a.com//b@b.com\n\t\tpassword: \"\", //12345678\n\t\tshow3: false,\n\t}),\n\n\tvalidations: {\n\t\tname: { required },\n\t\tpassword: { required, minLength: minLength(8) },\n\t},\n\tcomputed: {\n\t\tpasswordErrors() {\n\t\t\tconst errors = [];\n\t\t\tif (!this.$v.password.$dirty) return errors;\n\t\t\t!this.$v.password.minLength &&\n\t\t\t\terrors.push(\"La contrase침a debe ser 8 caracteres de largo, minimo.\");\n\t\t\t!this.$v.password.required && errors.push(\"Contase침a requerida.\");\n\t\t\treturn errors;\n\t\t},\n\t\tprogress() {\n\t\t\treturn Math.min(100, this.password.length * 13);\n\t\t},\n\t\tcolor() {\n\t\t\treturn [\"error\", \"warning\", \"success\"][Math.floor(this.progress / 40)];\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync login() {\n\t\t\tthis.$v.$touch();\n\t\t\tthis.name = this.name.trim();\n\t\t\tlet enviar = {\n\t\t\t\tname: this.name,\n\t\t\t\tpassword: this.password,\n\t\t\t};\n\n\t\t\taxios\n\t\t\t\t.get(\"sanctum/csrf-cookie\")\n\t\t\t\t.then((response) => {\n\t\t\t\t\tresponse;\n\t\t\t\t\taxios\n\t\t\t\t\t\t.post(\"api/login\", enviar)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tlet rol = response.data.user.rol_id;\n\t\t\t\t\t\t\tlet userId = response.data.user.id;\n\t\t\t\t\t\t\tconsole.log(userId);\n\t\t\t\t\t\t\tstore.commit(\"setrol\", rol);\n\t\t\t\t\t\t\tstore.commit(\"setUserId\", userId);\n\t\t\t\t\t\t\tlet validado = response.request.withCredentials;\n\t\t\t\t\t\t\tif (validado == true) {\n\t\t\t\t\t\t\t\tstore.commit(\"SET_TOKEN\", response.data.token);\n\t\t\t\t\t\t\t\tlet token = store.state.token;\n\t\t\t\t\t\t\t\tstore.dispatch(\"login\", { token });\n\t\t\t\t\t\t\t\tswitch (rol) {\n\t\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\t\trouter.push(\"/usuarios\").catch(() => {});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\trouter.push(\"/articulos\").catch(() => {});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\talert(\"Cuanta no existe o es incorrecta\");\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (validado == false) {\n\t\t\t\t\t\t\t\talert(\"Cuanta no existe o es incorrecta\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t});\n\t\t},\n\n\t\tclear() {\n\t\t\tthis.name = \"\";\n\t\t\tthis.password = \"\";\n\t\t},\n\t},\n};\n</script>\n\n<style scoped>\n.logcard {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding-top: 15rem;\n}\n\n.cont-card {\n\tpadding: 1rem;\n\twidth: 24em;\n}\n\n.fade-in-title {\n\tanimation: fadeIn 5s;\n\t-webkit-animation: fadeIn 5s;\n\t-moz-animation: fadeIn 5s;\n\t-o-animation: fadeIn 5s;\n\t-ms-animation: fadeIn 5s;\n}\n@keyframes fadeIn {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n@-moz-keyframes fadeIn {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n@-webkit-keyframes fadeIn {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n@-o-keyframes fadeIn {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n@-ms-keyframes fadeIn {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n.black-mode-text {\n\tcolor: #9acd32;\n}\n.white-mode-text {\n\tcolor: black;\n}\n</style>"]}]}