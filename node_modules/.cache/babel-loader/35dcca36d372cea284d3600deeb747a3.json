{"remainingRequest":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/babel-loader/lib/index.js!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/global/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/global/login.vue","mtime":1692826408710},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/babel.config.js","mtime":1660081311958},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/babel-loader/lib/index.js","mtime":1660080774033},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js","mtime":1660080780218}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Y29uc3QgewogIHJlcXVpcmVkLAogIG1pbkxlbmd0aAp9ID0gcmVxdWlyZSgidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIik7CgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwpheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC8iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNyZWFydXN1YXJpbyIsCiAgZGF0YTogKCkgPT4gKHsKICAgIG5hbWU6ICIiLAogICAgZW1haWw6ICIiLAogICAgLy9hQGEuY29tLy9iQGIuY29tCiAgICBwYXNzd29yZDogIiIsCiAgICAvLzEyMzQ1Njc4CiAgICBzaG93MzogZmFsc2UKICB9KSwKICB2YWxpZGF0aW9uczogewogICAgbmFtZTogewogICAgICByZXF1aXJlZAogICAgfSwKICAgIHBhc3N3b3JkOiB7CiAgICAgIHJlcXVpcmVkLAogICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCg4KQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhc3N3b3JkRXJyb3JzKCkgewogICAgICBjb25zdCBlcnJvcnMgPSBbXTsKICAgICAgaWYgKCF0aGlzLiR2LnBhc3N3b3JkLiRkaXJ0eSkgcmV0dXJuIGVycm9yczsKICAgICAgIXRoaXMuJHYucGFzc3dvcmQubWluTGVuZ3RoICYmIGVycm9ycy5wdXNoKCJMYSBjb250cmFzZcOxYSBkZWJlIHNlciA4IGNhcmFjdGVyZXMgZGUgbGFyZ28sIG1pbmltby4iKTsKICAgICAgIXRoaXMuJHYucGFzc3dvcmQucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goIkNvbnRhc2XDsWEgcmVxdWVyaWRhLiIpOwogICAgICByZXR1cm4gZXJyb3JzOwogICAgfSwKCiAgICBwcm9ncmVzcygpIHsKICAgICAgcmV0dXJuIE1hdGgubWluKDEwMCwgdGhpcy5wYXNzd29yZC5sZW5ndGggKiAxMyk7CiAgICB9LAoKICAgIGNvbG9yKCkgewogICAgICByZXR1cm4gWyJlcnJvciIsICJ3YXJuaW5nIiwgInN1Y2Nlc3MiXVtNYXRoLmZsb29yKHRoaXMucHJvZ3Jlc3MgLyA0MCldOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBsZXQgZW52aWFyID0gewogICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICB9OwogICAgICBheGlvcy5nZXQoInNhbmN0dW0vY3NyZi1jb29raWUiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXNwb25zZTsKICAgICAgICBheGlvcy5wb3N0KCJhcGkvbG9naW4iLCBlbnZpYXIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgbGV0IHJvbCA9IHJlc3BvbnNlLmRhdGEudXNlci5yb2xfaWQ7CiAgICAgICAgICBzdG9yZS5jb21taXQoInNldHJvbCIsIHJvbCk7CiAgICAgICAgICBsZXQgdmFsaWRhZG8gPSByZXNwb25zZS5yZXF1ZXN0LndpdGhDcmVkZW50aWFsczsKCiAgICAgICAgICBpZiAodmFsaWRhZG8gPT0gdHJ1ZSkgewogICAgICAgICAgICBzdG9yZS5zdGF0ZS50b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICAgIGxldCB0b2tlbiA9IHN0b3JlLnN0YXRlLnRva2VuOwogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgibG9naW4iLCB7CiAgICAgICAgICAgICAgdG9rZW4KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAocm9sID09PSAxKSB7CiAgICAgICAgICAgICAgcm91dGVyLnB1c2goIi91c3VhcmlvcyIpLmNhdGNoKCgpID0+IHt9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyb2wgPT09IDIpIHsKICAgICAgICAgICAgICByb3V0ZXIucHVzaCgiL2FydGljdWxvcyIpLmNhdGNoKCgpID0+IHt9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICh2YWxpZGFkbyA9PSBmYWxzZSkgewogICAgICAgICAgICBhbGVydCgiQ3VhbnRhIG5vIGV4aXN0ZSBvIGVzIGluY29ycmVjdGEiKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGNsZWFyKCkgewogICAgICB0aGlzLm5hbWUgPSAiIjsKICAgICAgdGhpcy5wYXNzd29yZCA9ICIiOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAuDA;EAAAA;EAAAC;AAAA;;AACA;AAEA;AACA;AAEAC;AACAA;AACA;EACAC,oBADA;EAEAC;IACAD,QADA;IAEAE,SAFA;IAEA;IACAC,YAHA;IAGA;IACAC;EAJA,EAFA;EASAC;IACAL;MAAAH;IAAA,CADA;IAEAM;MAAAN;MAAAC;IAAA;EAFA,CATA;EAaAQ;IACAC;MACA;MACA;MACA,+BACAC,oEADA;MAEA;MACA;IACA,CARA;;IASAC;MACA;IACA,CAXA;;IAYAC;MACA;IACA;;EAdA,CAbA;EA8BAC;IACA;MACA;MACA;QACAX,eADA;QAEAG;MAFA;MAIAJ,MACAa,GADA,CACA,qBADA,EAEAC,IAFA,CAEAC;QACAA;QACAf,MACAgB,IADA,CACA,WADA,EACAC,MADA,EAEAH,IAFA,CAEAC;UACA;UACAG;UAEA;;UACA;YACAA;YACA;YACAA;cAAAC;YAAA;;YACA;cACAC;YACA,CAFA,MAEA;cACAA;YACA;UACA,CATA,MASA;YACAC;UACA;QACA,CAnBA,EAoBAC,KApBA,CAoBAC;UACAC;QACA,CAtBA;MAuBA,CA3BA,EA4BAF,KA5BA,CA4BAC;QACAC;MACA,CA9BA;IA+BA,CAtCA;;IAwCAC;MACA;MACA;IACA;;EA3CA;AA9BA","names":["required","minLength","axios","name","data","email","password","show3","validations","computed","passwordErrors","errors","progress","color","methods","get","then","response","post","enviar","store","token","router","alert","catch","e","console","clear"],"sourceRoot":"src/components/global","sources":["login.vue"],"sourcesContent":["<template>\n\t<div class=\"logcard\">\n\t\t<v-card\n\t\t\tv-on:keyup.enter=\"login()\"\n\t\t\tclass=\"cont-card\"\n\t\t\televation=\"2\"\n\t\t\t:dark=\"this.$store.getters.hasdarkflag\"\n\t\t>\n\t\t\t<v-card-title class=\"fade-in-title\" style=\"font-size: 3rem\"\n\t\t\t\t><code class=\"font-weight-light\">Pocket</code\n\t\t\t\t><strong\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\tthis.$store.getters.hasdarkflag === true\n\t\t\t\t\t\t\t? 'black-mode-text'\n\t\t\t\t\t\t\t: 'white-mode-text',\n\t\t\t\t\t]\"\n\t\t\t\t\t>stock</strong\n\t\t\t\t></v-card-title\n\t\t\t>\n\t\t\t<v-text-field v-model=\"name\" label=\"Nombre\" required></v-text-field>\n\t\t\t<v-text-field\n\t\t\t\t:append-icon=\"show3 ? 'mdi-eye' : 'mdi-eye-off'\"\n\t\t\t\tv-model=\"password\"\n\t\t\t\t:type=\"show3 ? 'text' : 'password'\"\n\t\t\t\tclass=\"input-group--focused\"\n\t\t\t\t:counter=\"8\"\n\t\t\t\tlabel=\"contrase침a\"\n\t\t\t\t:error-messages=\"passwordErrors\"\n\t\t\t\trequired\n\t\t\t\t@click:append=\"show3 = !show3\"\n\t\t\t\t@input=\"$v.password.$touch()\"\n\t\t\t\t@blur=\"$v.password.$touch()\"\n\t\t\t\tloading\n\t\t\t>\n\t\t\t\t<template v-slot:progress>\n\t\t\t\t\t<v-progress-linear\n\t\t\t\t\t\t:value=\"progress\"\n\t\t\t\t\t\t:color=\"color\"\n\t\t\t\t\t\tabsolute\n\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t></v-progress-linear>\n\t\t\t\t</template>\n\t\t\t</v-text-field>\n\t\t\t<v-card-actions>\n\t\t\t\t<v-btn @click=\"clear\" outlined> limpiar </v-btn>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-btn color=\"#9acd32\" class=\"mr-4\" v-on:click=\"login()\" outlined>\n\t\t\t\t\tIniciar sesi칩n\n\t\t\t\t</v-btn>\n\t\t\t</v-card-actions>\n\t\t</v-card>\n\t</div>\n</template>\n\n<script>\nconst { required, minLength } = require(\"vuelidate/lib/validators\");\nimport axios from \"axios\";\n\nimport store from \"@/store\";\nimport router from \"@/router\";\n\naxios.defaults.withCredentials = true;\naxios.defaults.baseURL = \"http://127.0.0.1:8000/\";\nexport default {\n  name: \"crearusuario\",\n  data: () => ({\n    name: \"\",\n    email: \"\", //a@a.com//b@b.com\n    password: \"\", //12345678\n    show3: false,\n  }),\n\n  validations: {\n    name: { required },\n    password: { required, minLength: minLength(8) },\n  },\n  computed: {\n    passwordErrors() {\n      const errors = [];\n      if (!this.$v.password.$dirty) return errors;\n      !this.$v.password.minLength &&\n        errors.push(\"La contrase침a debe ser 8 caracteres de largo, minimo.\");\n      !this.$v.password.required && errors.push(\"Contase침a requerida.\");\n      return errors;\n    },\n    progress() {\n      return Math.min(100, this.password.length * 13);\n    },\n    color() {\n      return [\"error\", \"warning\", \"success\"][Math.floor(this.progress / 40)];\n    },\n  },\n\n  methods: {\n    async login() {\n      this.$v.$touch();\n      let enviar = {\n        name: this.name,\n        password: this.password,\n      };\n      axios\n        .get(\"sanctum/csrf-cookie\")\n        .then((response) => {\n          response;\n          axios\n            .post(\"api/login\", enviar)\n            .then((response) => {\n              let rol = response.data.user.rol_id;\n              store.commit(\"setrol\", rol);\n\n              let validado = response.request.withCredentials;\n              if (validado == true) {\n                store.state.token = response.data.token;\n                let token = store.state.token;\n                store.dispatch(\"login\", { token });\n                if (rol === 1) {\n                  router.push(\"/usuarios\").catch(() => {});\n                } else if (rol === 2) {\n                  router.push(\"/articulos\").catch(() => {});\n                }\n              } else if (validado == false) {\n                alert(\"Cuanta no existe o es incorrecta\");\n              }\n            })\n            .catch((e) => {\n              console.log(e);\n            });\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    clear() {\n      this.name = \"\";\n      this.password = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.logcard {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 15rem;\n}\n\n.cont-card {\n  padding: 1rem;\n  width: 24em;\n}\n\n.fade-in-title {\n  animation: fadeIn 5s;\n  -webkit-animation: fadeIn 5s;\n  -moz-animation: fadeIn 5s;\n  -o-animation: fadeIn 5s;\n  -ms-animation: fadeIn 5s;\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-moz-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-o-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-ms-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n</style>"]}]}