{"remainingRequest":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/table-lists/tabla-rack.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/src/components/table-lists/tabla-rack.vue","mtime":1686361930322},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/babel-loader/lib/index.js","mtime":1660080774033},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/cache-loader/dist/cjs.js","mtime":1642231923881},{"path":"/Users/fsm/Projects/web-personal/pocketstock/pocket-stock-front/node_modules/vue-loader/lib/index.js","mtime":1660080780218}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IHsgZ2V0UmFjaywgZGVsZXRlUmFjaywgZWRpdFJhY2sgfSBmcm9tICJAL2FwaS9yYWNrcy5qcyI7CiAgaW1wb3J0IHsgdXBwZXJDb252ZXJ0ZXIgfSBmcm9tICJAL3NwZWNpYWwvdXBwZXJjYXNlcy1jb252ZXJ0ZXIuanMiOwogIGV4cG9ydCBkZWZhdWx0IHsKICAgIG5vbWJyZV9yYWNrOiAidGFibGEtcmFjayIsCiAgICBkYXRhOiAoKSA9PiAoewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBkaWFsb2dEZWxldGU6IGZhbHNlLAogICAgICBzZWFyY2g6ICIiLAogICAgICBjYXJnYW5kbzogdHJ1ZSwKICAgICAgaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICJSYWNrIiwKICAgICAgICAgIGFsaWduOiAic3RhcnQiLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6ICJub21icmVfcmFjayIsCiAgICAgICAgfSwKCiAgICAgICAgeyB0ZXh0OiAiQWNjaW9uZXMiLCB2YWx1ZTogImFjdGlvbnMiLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgICAgXSwKCiAgICAgIHJhY2tBcnJheTogW10sCiAgICAgIC8vdmFyaWFibGUgZW4gbGEgcXVlIHNlIGRlcG9zaXRhIGxhIHBvc2ljaW9uIGVuIGVsIHNlbGVjdG9yCgogICAgICBlZGl0ZWRJbmRleDogLTEsCiAgICAgIGVkaXRlZEl0ZW06IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbm9tYnJlX3JhY2s6ICIiLAogICAgICB9LAogICAgICBkZWZhdWx0SXRlbTogewogICAgICAgIGlkOiAiIiwKICAgICAgICBub21icmVfcmFjazogIiIsCiAgICAgIH0sCiAgICB9KSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMub25Gb2N1cygpOwogICAgICB3aW5kb3cuRWNoby5jaGFubmVsKCJyYWNrcyIpLmxpc3RlbigicmFja0NyZWF0ZWQiLCAoZSkgPT4gewogICAgICAgIHRoaXMucmFja0FycmF5ID0gZS5yYWNrczsKICAgICAgfSk7CiAgICAgIGdldFJhY2sodGhpcy5yYWNrQXJyYXkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXRzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuY2FyZ2FuZG8gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBjb21wdXRlZDogewogICAgICBmb3JtVGl0bGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGVkSW5kZXggPT09IC0xID8gIk5ldyBJdGVtIiA6ICJFZGl0YXIgcmFjayI7CiAgICAgIH0sCiAgICB9LAoKICAgIHdhdGNoOiB7CiAgICAgIGRpYWxvZyh2YWwpIHsKICAgICAgICB2YWwgfHwgdGhpcy5jbG9zZSgpOwogICAgICB9LAogICAgICBkaWFsb2dEZWxldGUodmFsKSB7CiAgICAgICAgdmFsIHx8IHRoaXMuY2xvc2VEZWxldGUoKTsKICAgICAgfSwKICAgIH0sCgogICAgY3JlYXRlZCgpIHt9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgb25Gb2N1cygpIHsKICAgICAgICBsZXQgc3RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib25zZWFyY2giKTsKICAgICAgICBzdGV4dDsKICAgICAgICBzdGV4dCA9IGFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoZSkgPT4gewogICAgICAgICAgaWYgKGUuYWx0S2V5KSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvbnNlYXJjaCIpLmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbHRlck9ubHlDYXBzVGV4dCh2YWx1ZSwgc2VhcmNoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHZhbHVlICE9IG51bGwgJiYKICAgICAgICAgIHNlYXJjaCAhPSBudWxsICYmCiAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmCiAgICAgICAgICB2YWx1ZS50b1N0cmluZygpLnRvTG9jYWxlVXBwZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpICE9PSAtMQogICAgICAgICk7CiAgICAgIH0sCgogICAgICBlZGl0SXRlbShpdGVtKSB7CiAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMucmFja0FycmF5LmluZGV4T2YoaXRlbSk7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7CgogICAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZTsKICAgICAgfSwKCiAgICAgIGRlbGV0ZUl0ZW0oaXRlbSkgewogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLnJhY2tBcnJheS5pbmRleE9mKGl0ZW0pOwogICAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOwogICAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZTsKCiAgICAgICAgbGV0IGlkID0gdGhpcy5lZGl0ZWRJdGVtLmlkOwogICAgICAgIGRlbGV0ZVJhY2soaWQpOwogICAgICB9LAoKICAgICAgZGVsZXRlSXRlbUNvbmZpcm0oKSB7CiAgICAgICAgdGhpcy5yYWNrQXJyYXkuc3BsaWNlKHRoaXMuZWRpdGVkSW5kZXgsIDEpOwogICAgICAgIHRoaXMuY2xvc2VEZWxldGUoKTsKICAgICAgfSwKCiAgICAgIGNsb3NlKCkgewogICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSk7CiAgICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICBjbG9zZURlbGV0ZSgpIHsKICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IGZhbHNlOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEl0ZW0pOwogICAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xOwogICAgICAgIH0pOwogICAgICB9LAoKICAgICAgc2F2ZSgpIHsKICAgICAgICBpZiAodGhpcy5lZGl0ZWRJbmRleCA+IC0xKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucmFja0FycmF5W3RoaXMuZWRpdGVkSW5kZXhdLCB0aGlzLmVkaXRlZEl0ZW0pOwogICAgICAgICAgbGV0IHNlbmQgPSB0aGlzLmVkaXRlZEl0ZW07CiAgICAgICAgICBzZW5kLm5vbWJyZV9yYWNrID0gdXBwZXJDb252ZXJ0ZXIoc2VuZC5ub21icmVfcmFjayk7CiAgICAgICAgICBsZXQgdXJsID0gImFwaS9yYWNrLyI7CiAgICAgICAgICB1cmwgPSB1cmwgKyBzZW5kLmlkOwogICAgICAgICAgdXJsID0gYCR7dXJsfT8keyJub21icmVfcmFjaz0iICsgc2VuZC5ub21icmVfcmFja31gOwogICAgICAgICAgZWRpdFJhY2sodXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5yYWNrQXJyYXkucHVzaCh0aGlzLmVkaXRlZEl0ZW0pOwogICAgICAgIH0KICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0sCiAgICB9LAogIH07Cg=="},{"version":3,"sources":["tabla-rack.vue"],"names":[],"mappings":";AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tabla-rack.vue","sourceRoot":"src/components/table-lists","sourcesContent":["<template>\n  <div class=\"tabla\" id=\"app\">\n    <v-row>\n      <v-col cols=\"12\" sm=\"6\" md=\"4\">\n        <v-text-field\n          v-model=\"search\"\n          label=\"Buscar rack\"\n          class=\"mx-4\"\n          id=\"onsearch\"\n        ></v-text-field>\n      </v-col>\n    </v-row>\n    <v-app id=\"inspire\">\n      <v-progress-linear\n        height=\"6\"\n        indeterminate\n        color=\"cyan\"\n        :active=\"cargando\"\n      ></v-progress-linear>\n      <v-data-table\n        id=\"tabla\"\n        :headers=\"headers\"\n        :items=\"rackArray\"\n        sort-by=\"cantidad_articulo\"\n        class=\"elevation-1\"\n        :search=\"search\"\n        :custom-filter=\"filterOnlyCapsText.toUpperCase\"\n      >\n        <template v-slot:top>\n          <v-toolbar flat>\n            <v-toolbar-title>Tabla rack</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-dialog v-model=\"dialog\" max-width=\"500px\">\n              <v-card>\n                <v-card-title>\n                  <h1 class=\"headline\">{{ formTitle }}</h1>\n                </v-card-title>\n\n                <v-card-text>\n                  <v-container>\n                    <v-row>\n                      <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                        <v-text-field\n                          v-model=\"editedItem.nombre_rack\"\n                          label=\"Nombre\"\n                        ></v-text-field>\n                      </v-col>\n                    </v-row>\n                  </v-container>\n                </v-card-text>\n\n                <v-card-actions v-on:keyup.enter=\"save\">\n                  <v-spacer></v-spacer>\n                  <v-btn color=\"blue darken-1\" text @click=\"close\">\n                    Cancelar\n                  </v-btn>\n                  <v-btn color=\"blue darken-1\" text @click=\"save\">\n                    Guardar\n                  </v-btn>\n                </v-card-actions>\n              </v-card>\n            </v-dialog>\n            <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n              <v-card>\n                <v-card-title class=\"headline\"\n                  >Â¿Estas seguro de querer eliminarlo?</v-card-title\n                >\n                <v-card-actions v-on:keyup.enter=\"deleteItemConfirm\">\n                  <v-spacer></v-spacer>\n                  <v-btn color=\"blue darken-1\" text @click=\"closeDelete\"\n                    >Cancelar</v-btn\n                  >\n                  <v-btn color=\"blue darken-1\" text @click=\"deleteItemConfirm\"\n                    >Aceptar</v-btn\n                  >\n                  <v-spacer></v-spacer>\n                </v-card-actions>\n              </v-card>\n            </v-dialog>\n          </v-toolbar>\n        </template>\n        <template v-slot:[`item.actions`]=\"{ item }\">\n          <v-icon small class=\"mr-2\" @click=\"editItem(item)\">\n            mdi-pencil\n          </v-icon>\n          <v-icon small @click=\"deleteItem(item)\"> mdi-delete </v-icon>\n        </template>\n        <template v-slot:no-data>\n          <span>Datos no disponibles.</span>\n        </template>\n      </v-data-table>\n    </v-app>\n  </div>\n</template>\n\n<script>\n  import { getRack, deleteRack, editRack } from \"@/api/racks.js\";\n  import { upperConverter } from \"@/special/uppercases-converter.js\";\n  export default {\n    nombre_rack: \"tabla-rack\",\n    data: () => ({\n      dialog: false,\n      dialogDelete: false,\n      search: \"\",\n      cargando: true,\n      headers: [\n        {\n          text: \"Rack\",\n          align: \"start\",\n          sortable: false,\n          value: \"nombre_rack\",\n        },\n\n        { text: \"Acciones\", value: \"actions\", sortable: false },\n      ],\n\n      rackArray: [],\n      //variable en la que se deposita la posicion en el selector\n\n      editedIndex: -1,\n      editedItem: {\n        id: \"\",\n        nombre_rack: \"\",\n      },\n      defaultItem: {\n        id: \"\",\n        nombre_rack: \"\",\n      },\n    }),\n    mounted() {\n      this.onFocus();\n      window.Echo.channel(\"racks\").listen(\"rackCreated\", (e) => {\n        this.rackArray = e.racks;\n      });\n      getRack(this.rackArray).then((response) => {\n        if (response.stats === 200) {\n          this.cargando = false;\n        }\n      });\n    },\n\n    computed: {\n      formTitle() {\n        return this.editedIndex === -1 ? \"New Item\" : \"Editar rack\";\n      },\n    },\n\n    watch: {\n      dialog(val) {\n        val || this.close();\n      },\n      dialogDelete(val) {\n        val || this.closeDelete();\n      },\n    },\n\n    created() {},\n\n    methods: {\n      onFocus() {\n        let stext = document.getElementById(\"onsearch\");\n        stext;\n        stext = addEventListener(\"keydown\", (e) => {\n          if (e.altKey) {\n            document.getElementById(\"onsearch\").focus();\n          }\n        });\n      },\n      filterOnlyCapsText(value, search) {\n        return (\n          value != null &&\n          search != null &&\n          typeof value === \"string\" &&\n          value.toString().toLocaleUpperCase().indexOf(search) !== -1\n        );\n      },\n\n      editItem(item) {\n        this.editedIndex = this.rackArray.indexOf(item);\n        this.editedItem = Object.assign({}, item);\n\n        this.dialog = true;\n      },\n\n      deleteItem(item) {\n        this.editedIndex = this.rackArray.indexOf(item);\n        this.editedItem = Object.assign({}, item);\n        this.dialogDelete = true;\n\n        let id = this.editedItem.id;\n        deleteRack(id);\n      },\n\n      deleteItemConfirm() {\n        this.rackArray.splice(this.editedIndex, 1);\n        this.closeDelete();\n      },\n\n      close() {\n        this.dialog = false;\n        this.$nextTick(() => {\n          this.editedItem = Object.assign({}, this.defaultItem);\n          this.editedIndex = -1;\n        });\n      },\n\n      closeDelete() {\n        this.dialogDelete = false;\n        this.$nextTick(() => {\n          this.editedItem = Object.assign({}, this.defaultItem);\n          this.editedIndex = -1;\n        });\n      },\n\n      save() {\n        if (this.editedIndex > -1) {\n          Object.assign(this.rackArray[this.editedIndex], this.editedItem);\n          let send = this.editedItem;\n          send.nombre_rack = upperConverter(send.nombre_rack);\n          let url = \"api/rack/\";\n          url = url + send.id;\n          url = `${url}?${\"nombre_rack=\" + send.nombre_rack}`;\n          editRack(url);\n        } else {\n          this.rackArray.push(this.editedItem);\n        }\n        this.close();\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  #tabla {\n    width: 60rem;\n  }\n  .tabla {\n    width: 60rem;\n  }\n</style>"]}]}